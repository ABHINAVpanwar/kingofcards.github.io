<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>KING OF CARDS</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="static/index.css" />
    <link rel="icon" href="static/IMG/icon.png" type="image/icon type" />
  </head>

  <body>
    <audio
      id="bg-audio"
      preload="auto"
      src="static/opening/OpeningSong.mp3"
    ></audio>
    <video id="intro-video" preload="auto">
      <source src="static/opening/CarsOpening.mp4" type="video/mp4" />
    </video>

    <!-- Custom Alert Div -->
    <div id="alert-box" class="alert-box">
      <p id="alert-message"></p>
      <button id="ok-button">OK</button>
    </div>

    <!-- Intro Video Overlay -->
    <div id="intro-video-overlay" class="intro-video-overlay"></div>

    <nav>
      <div class="logo"><img src="static/IMG/logo.png" /></div>
      <input id="click" type="checkbox" />
      <label class="menu-btn" for="click"><i class="fas fa-bars"></i></label>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="views/about.html">About</a></li>
        <li><a href="views/player.html">Players</a></li>
        <li><a href="views/protection.html">Gallery</a></li>
        <li><a href="views/alert.html">Alert</a></li>
      </ul>
    </nav>
    <section id="s1">
      <h1>WELCOME</h1>
      <h3>TO</h3>
      <p>KING OF CARDS</p>
    </section>
    <section id="s2">
      <table>
        <thead>
          <tr>
            <th>EDITION</th>
            <th>WINNER</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><a href="views/1.html">1</a></td>
            <td>ABHISHEK SEHRAWAT</td>
          </tr>
          <tr>
            <td><a href="views/2.html">2</a></td>
            <td>UTKARSH PANWAR</td>
          </tr>
          <tr>
            <td><a href="views/3.html">3</a></td>
            <td>UTKARSH PANWAR</td>
          </tr>
          <tr>
            <td><a href="views/4.html">4</a></td>
            <td>ABHINAV PANWAR</td>
          </tr>
        </tbody>
      </table>
    </section>

    <script>
      const video = document.getElementById("intro-video");
      const audio = document.getElementById("bg-audio");
      const alertBox = document.getElementById("alert-box");
      const okButton = document.getElementById("ok-button");
      const alertMessage = document.getElementById("alert-message");
      const videoOverlay = document.getElementById("intro-video-overlay");

      // Function to play media
      function playMedia() {
        video.currentTime = 0;
        audio.currentTime = 0;
        audio.play();
        video.play();
      }

      window.onload = function () {
        const dayofwinning = new Date("01/02/2023");
        let reign = `${Math.floor(
          (Date.now() - dayofwinning) / (1000 * 60 * 60 * 24)
        )}`;

        // Display custom alert message
        alertMessage.innerHTML =
          "<span style='color: gold;'>ABHINAV PANWAR</span> IS THE CURRENT WINNER OF KING OF CARDS WITH A REIGN OF " +
          reign +
          " DAYS.";

        setTimeout(function () {
          // Show the alert box after 2 seconds
          alertBox.style.display = "block";
        }, 2000);

        // Hide the alert box and show video overlay when user clicks "OK"
        okButton.addEventListener("click", function () {
          alertBox.style.display = "none"; // Hide the alert box
          videoOverlay.style.display = "block"; // Show the video overlay
          setTimeout(function () {
            videoOverlay.style.display = "none"; // Hide the video overlay after 1 second
            playMedia(); // Play the video and audio
          }, 1000);
        });

        // Smooth transition after video ends
        video.onended = function () {
          video.classList.add("hidden"); // Smoothly hide video
          document.body.style.overflow = "auto"; // Enable scrolling
        };

        const checkbox = document.getElementById("click");
        const s1 = document.getElementById("s1");
        const s2 = document.getElementById("s2");

        checkbox.addEventListener("change", function () {
          if (checkbox.checked) {
            s1.style.display = "none";
            s2.style.display = "none";
          } else {
            s1.style.display = "flex";
            s2.style.display = "block";
          }
        });

        // Ensure audio and video start simultaneously
        video.addEventListener('canplaythrough', function () {
          audio.play(); // Play audio when both media are ready
          video.play(); // Play video when ready
        });
      };
    </script>
  </body>
</html>
